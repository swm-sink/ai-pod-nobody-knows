{
  "$schema": "https://json-schema.org/draft/2025-08/schema",
  "$id": "https://ai-podcasts-nobody-knows.com/schemas/production-agent-response.json",
  "title": "Production Agent Response Schema",
  "description": "Schema for production stream agents (script-writer, audio-synthesizer, etc.) responses",
  "allOf": [
    {
      "$ref": "./base-agent-response.json"
    }
  ],
  "properties": {
    "production_specifications": {
      "type": "object",
      "properties": {
        "content_type": {
          "type": "string",
          "enum": [
            "podcast_script",
            "audio_file",
            "production_notes",
            "quality_report",
            "synthesis_data"
          ],
          "description": "Type of content produced"
        },
        "target_duration": {
          "type": "object",
          "properties": {
            "target_minutes": {
              "type": "number",
              "minimum": 1,
              "maximum": 60
            },
            "tolerance_minutes": {
              "type": "number",
              "minimum": 0,
              "maximum": 5
            },
            "actual_duration": {
              "type": "number",
              "minimum": 0,
              "description": "Actual duration achieved (if applicable)"
            }
          },
          "required": ["target_minutes", "tolerance_minutes"],
          "additionalProperties": false
        },
        "format_compliance": {
          "type": "object",
          "properties": {
            "markdown_structure": {
              "type": "boolean",
              "description": "Complies with production markdown requirements"
            },
            "section_organization": {
              "type": "boolean",
              "description": "Proper hierarchical organization"
            },
            "timing_annotations": {
              "type": "boolean",
              "description": "Includes timing markers for production"
            },
            "metadata_completeness": {
              "type": "boolean",
              "description": "All required metadata included"
            }
          },
          "required": ["markdown_structure", "section_organization", "timing_annotations", "metadata_completeness"],
          "additionalProperties": false
        },
        "technical_requirements": {
          "type": "object",
          "properties": {
            "tts_optimization": {
              "type": "object",
              "properties": {
                "pronunciation_guidance": {
                  "type": "boolean",
                  "description": "Includes pronunciation guides for complex terms"
                },
                "pacing_markers": {
                  "type": "boolean",
                  "description": "Includes natural pause and emphasis markers"
                },
                "ssml_compatibility": {
                  "type": "boolean",
                  "description": "Compatible with SSML markup"
                },
                "elevenlabs_optimization": {
                  "type": "boolean",
                  "description": "Optimized for ElevenLabs synthesis"
                }
              },
              "required": ["pronunciation_guidance", "pacing_markers", "ssml_compatibility", "elevenlabs_optimization"],
              "additionalProperties": false
            },
            "production_readiness": {
              "type": "object",
              "properties": {
                "quality_gate_compliance": {
                  "type": "boolean",
                  "description": "Meets quality gate requirements"
                },
                "workflow_compatibility": {
                  "type": "boolean",
                  "description": "Compatible with downstream workflow"
                },
                "error_handling": {
                  "type": "boolean",
                  "description": "Includes error handling and recovery"
                },
                "validation_checkpoints": {
                  "type": "boolean",
                  "description": "Includes validation checkpoints"
                }
              },
              "required": ["quality_gate_compliance", "workflow_compatibility", "error_handling", "validation_checkpoints"],
              "additionalProperties": false
            }
          },
          "required": ["tts_optimization", "production_readiness"],
          "additionalProperties": false
        }
      },
      "required": ["content_type", "target_duration", "format_compliance", "technical_requirements"],
      "additionalProperties": false
    },
    "content_analysis": {
      "type": "object",
      "properties": {
        "brand_voice_integration": {
          "type": "object",
          "properties": {
            "intellectual_humility_score": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Integration of intellectual humility themes"
            },
            "learning_celebration_score": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Celebration of learning and discovery"
            },
            "expert_humanity_score": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Humanization of expert voices"
            },
            "accessible_wonder_score": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Accessible presentation of complex ideas"
            },
            "brand_voice_examples": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "example_id": {
                    "type": "string",
                    "pattern": "^brand_\\d{3}$"
                  },
                  "category": {
                    "type": "string",
                    "enum": ["intellectual_humility", "learning_celebration", "expert_humanity", "accessible_wonder"]
                  },
                  "content_excerpt": {
                    "type": "string",
                    "minLength": 1
                  },
                  "effectiveness": {
                    "type": "string",
                    "enum": ["excellent", "good", "adequate", "needs_improvement"]
                  }
                },
                "required": ["example_id", "category", "content_excerpt", "effectiveness"],
                "additionalProperties": false
              }
            }
          },
          "required": ["intellectual_humility_score", "learning_celebration_score", "expert_humanity_score", "accessible_wonder_score", "brand_voice_examples"],
          "additionalProperties": false
        },
        "narrative_structure": {
          "type": "object",
          "properties": {
            "opening_effectiveness": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Effectiveness of opening hook and engagement"
            },
            "progression_quality": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Quality of logical progression and flow"
            },
            "transition_naturalness": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Naturalness of transitions between sections"
            },
            "conclusion_satisfaction": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Satisfaction and completeness of conclusion"
            },
            "cognitive_load_balance": {
              "type": "string",
              "enum": ["optimal", "manageable", "heavy", "overwhelming"],
              "description": "Assessment of cognitive load distribution"
            }
          },
          "required": ["opening_effectiveness", "progression_quality", "transition_naturalness", "conclusion_satisfaction", "cognitive_load_balance"],
          "additionalProperties": false
        },
        "research_integration": {
          "type": "object",
          "properties": {
            "research_fidelity": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Faithfulness to source research"
            },
            "expert_attribution": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Accuracy of expert quote attribution"
            },
            "source_integration": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Quality of source integration into narrative"
            },
            "fact_accuracy": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Accuracy of factual claims and statistics"
            },
            "research_citations": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "citation_id": {
                    "type": "string",
                    "pattern": "^cite_\\d{3}$"
                  },
                  "source_type": {
                    "type": "string",
                    "enum": ["academic_paper", "expert_interview", "authoritative_report", "news_article", "government_data"]
                  },
                  "authority_level": {
                    "type": "string",
                    "enum": ["authoritative", "credible", "supporting", "supplementary"]
                  },
                  "integration_quality": {
                    "type": "string",
                    "enum": ["seamless", "effective", "adequate", "awkward"]
                  }
                },
                "required": ["citation_id", "source_type", "authority_level", "integration_quality"],
                "additionalProperties": false
              }
            }
          },
          "required": ["research_fidelity", "expert_attribution", "source_integration", "fact_accuracy", "research_citations"],
          "additionalProperties": false
        }
      },
      "required": ["brand_voice_integration", "narrative_structure", "research_integration"],
      "additionalProperties": false
    },
    "production_metrics": {
      "type": "object",
      "properties": {
        "content_statistics": {
          "type": "object",
          "properties": {
            "word_count": {
              "type": "integer",
              "minimum": 0
            },
            "estimated_speaking_time": {
              "type": "number",
              "minimum": 0,
              "description": "Estimated speaking time in minutes"
            },
            "complexity_score": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Content complexity assessment"
            },
            "readability_score": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Readability for target audience"
            }
          },
          "required": ["word_count", "estimated_speaking_time", "complexity_score", "readability_score"],
          "additionalProperties": false
        },
        "optimization_applied": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "brand_voice_optimization",
              "tts_speech_pattern_optimization",
              "narrative_flow_optimization",
              "research_integration_optimization",
              "complexity_management",
              "engagement_enhancement"
            ]
          },
          "description": "Content optimizations applied during production"
        },
        "quality_checkpoints": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "checkpoint_id": {
                "type": "string",
                "pattern": "^checkpoint_\\d{3}$"
              },
              "checkpoint_type": {
                "type": "string",
                "enum": ["brand_voice", "technical_compliance", "research_accuracy", "narrative_flow", "production_readiness"]
              },
              "status": {
                "type": "string",
                "enum": ["passed", "passed_with_notes", "failed", "not_applicable"]
              },
              "notes": {
                "type": "string"
              }
            },
            "required": ["checkpoint_id", "checkpoint_type", "status"],
            "additionalProperties": false
          }
        }
      },
      "required": ["content_statistics", "optimization_applied", "quality_checkpoints"],
      "additionalProperties": false
    },
    "quality_evaluation_preparation": {
      "type": "object",
      "properties": {
        "evaluation_readiness": {
          "type": "string",
          "enum": ["ready", "ready_with_notes", "needs_revision", "major_issues"],
          "description": "Readiness for quality evaluation"
        },
        "anticipated_strengths": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1
          },
          "description": "Areas expected to score well in quality evaluation"
        },
        "potential_concerns": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1
          },
          "description": "Areas that may need attention in quality evaluation"
        },
        "evaluator_guidance": {
          "type": "object",
          "properties": {
            "claude_focus_areas": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1
              }
            },
            "gemini_focus_areas": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1
              }
            },
            "perplexity_focus_areas": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1
              }
            }
          },
          "required": ["claude_focus_areas", "gemini_focus_areas", "perplexity_focus_areas"],
          "additionalProperties": false
        }
      },
      "required": ["evaluation_readiness", "anticipated_strengths", "potential_concerns", "evaluator_guidance"],
      "additionalProperties": false
    }
  },
  "required": ["production_specifications", "content_analysis", "production_metrics", "quality_evaluation_preparation"],
  "additionalProperties": false
}
